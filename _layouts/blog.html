<!DOCTYPE html>
<html lang="{{ site.lang | default: 'en-US' }}">
  <head>
    <meta charset="UTF-8" />
    {% seo %}
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      rel="preload"
      href="https://fonts.googleapis.com/css?family=Open+Sans:400,700&display=swap"
      as="style"
      type="text/css"
      crossorigin
    />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#157878" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <link
      rel="stylesheet"
      href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}"
    />
    <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}" />
    {% include head-custom.html %}
  </head>
  <body>
    <a id="skip-to-content" href="#content">Skip to the content.</a>

    <!-- Hamburger Icon Button for Mobile View -->
    <button class="menu-toggle" aria-label="Toggle Menu" onclick="toggleMenu()">
      &#9776;
      <!-- Unicode for Hamburger Icon -->
    </button>

    <!-- Top Navigation Bar (Initially Hidden) -->
    <nav class="top-nav mobile-nav">
      <ul>
        <li><a href="{{ '/' | relative_url }}">Home</a></li>
        <li><a href="{{ '/about/' | relative_url }}">About</a></li>
        <li><a href="{{ '/blog/' | relative_url }}">Blog</a></li>
      </ul>
    </nav>

    <!-- Page Header and Content -->
    <header class="page-header" role="banner">
      <h1 class="project-name">
        {{ page.title | default: site.title | default:
        site.github.repository_name }}
      </h1>
      <h2 class="project-tagline">
        {{ page.description | default: site.description | default:
        site.github.project_tagline }}
      </h2>
    </header>

    <!-- Sorting Links -->
    <nav class="sorting-nav">
      <button onclick="sortPosts('alphabetical')">Alphabetical</button>
      <button onclick="sortPosts('newest')">Newest to Oldest</button>
      <button onclick="sortPosts('oldest')">Oldest to Newest</button>
    </nav>

    <!-- Blog Posts List -->
    <main id="content" class="main-content" role="main">
      <ul id="posts-list">
        {% for post in site.posts %}
        <li
          data-title="{{ post.title }}"
          data-date="{{ post.date | date: '%Y-%m-%d' }}"
        >
          <a href="{{ post.url }}">{{ post.title }}</a>
          <span>{{ post.date | date: '%B %d, %Y' }}</span>
        </li>
        {% endfor %}
      </ul>
    </main>

    <script>
      // JavaScript Sorting Function
      function sortPosts(order) {
        var postsList = document.getElementById("posts-list");
        var posts = Array.from(postsList.getElementsByTagName("li"));

        if (order === "alphabetical") {
          posts.sort(function (a, b) {
            return a
              .getAttribute("data-title")
              .localeCompare(b.getAttribute("data-title"));
          });
        } else if (order === "newest") {
          posts.sort(function (a, b) {
            return (
              new Date(b.getAttribute("data-date")) -
              new Date(a.getAttribute("data-date"))
            );
          });
        } else if (order === "oldest") {
          posts.sort(function (a, b) {
            return (
              new Date(a.getAttribute("data-date")) -
              new Date(b.getAttribute("data-date"))
            );
          });
        }

        // Reorder the posts in the DOM
        posts.forEach(function (post) {
          postsList.appendChild(post);
        });

        function toggleMenu() {
          var nav = document.querySelector(".mobile-nav");
          nav.style.display = nav.style.display === "block" ? "none" : "block";
        }
      }
    </script>
  </body>
</html>
